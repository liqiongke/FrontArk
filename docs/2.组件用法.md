# 组件用法文档

## 1. 基础组件

### 1.1 表单组件 (Form)

**用法示例：**

```tsx
const Form = () => {
  return (
    <div>
      <h1>表单页面</h1>
    </div>
  );
};

export default Form;
```

### 1.2 表格组件 (Table)

**用法示例：**

```tsx
// 主入口文件 index.tsx
import { ViewRoot } from '@jl/framework';
import Data from './data';
import Handler from './handler';
import VType from './view';
const DemoTablePage = () => {
  return <ViewRoot ViewClass={VType} DataClass={Data} HandlerClass={Handler} />;
};

export default DemoTablePage;
```

**数据配置 (data.tsx)：**

```tsx
import { DataBase, type DataProps } from '@jl/framework';

class Data extends DataBase {
  mainView: DataProps = {
    id: 'table',
    url: '/demo/base/table',
    keyAttr: 'id',
  };

  mainForm: DataProps = {
    id: 'form',
    url: '/demo/base/form',
  };
}

export default Data;
```

**事件处理 (handler.ts)：**

```tsx
import { HandlerBase } from '@jl/framework';

class Handler extends HandlerBase {
  openModal = () => {
    const modalHandler = this.getModalHandler('modal');
    modalHandler.show();
  };

  onSetData = () => {
    this.setData(['form', 'name'], new Date().toLocaleString());
  };

  getData = () => {
    this.get('/demo/base/table/get', { name: 'test' });
  };

  postData = () => {
    this.post('/demo/base/table/post', { name: 'test' });
  };
}

export default Handler;
```

## 2. 控件组件

### 2.1 文本控件 (Text)

**用法示例：**

```tsx
{
  title: '测试text',
  field: 'id',
  ctrl: { type: Ctrl.Text }
}
```

### 2.2 输入框控件 (Input)

**用法示例：**

```tsx
{
  title: '测试input',
  field: 'name',
  ctrl: { type: Ctrl.Input }
}
```

### 2.3 下拉选择控件 (Select)

**用法示例：**

```tsx
const options = [
  { label: '1', value: 'V1' },
  { label: '2', value: 'V2' },
  { label: '3', value: 'V3' },
];

{
  title: '测试select',
  field: 'select',
  ctrl: { type: Ctrl.Select, items: options }
}
```

### 2.4 开关控件 (Switch)

**用法示例：**

```tsx
{
  title: '测试switch',
  field: 'switch',
  ctrl: { type: Ctrl.Switch }
}
```

### 2.5 单选按钮控件 (Radio)

**用法示例：**

```tsx
const options = [
  { label: '1', value: 'V1' },
  { label: '2', value: 'V2' },
  { label: '3', value: 'V3' },
];

{
  title: '测试radio',
  field: 'radio',
  ctrl: { type: Ctrl.Radio, items: options }
}
```

### 2.6 复选框控件 (Checkbox)

**用法示例：**

```tsx
const options = [
  { label: '1', value: 'V1' },
  { label: '2', value: 'V2' },
  { label: '3', value: 'V3' },
];

{
  title: 'Checkbox',
  field: 'checkbox',
  ctrl: { type: Ctrl.Checkbox, items: options }
}
```

### 2.7 日期选择控件 (Date)

**用法示例：**

```tsx
{
  title: 'Date',
  field: 'date',
  ctrl: { type: Ctrl.Date }
}
```

### 2.8 日期范围选择控件 (DateRange)

**用法示例：**

```tsx
{
  title: 'DateRange',
  field: 'dateRange',
  ctrl: { type: Ctrl.DateRange }
}
```

### 2.9 时间选择控件 (Time)

**用法示例：**

```tsx
{
  title: 'Time',
  field: 'time',
  ctrl: { type: Ctrl.Time }
}
```

### 2.10 时间范围选择控件 (TimeRange)

**用法示例：**

```tsx
{
  title: 'TimeRange',
  field: 'timeRange',
  ctrl: { type: Ctrl.TimeRange }
}
```

### 2.11 链接控件 (Link)

**用法示例：**

```tsx
{
  title: 'Link',
  field: 'link',
  ctrl: { type: Ctrl.Link, href: { label: '测试', value: '/demo/composite/formAndTable' } }
}
```

### 2.12 上传控件 (Upload)

**用法示例：**

```tsx
{
  title: 'Upload',
  field: 'upload',
  ctrl: { type: Ctrl.Upload }
}
```

### 2.13 按钮控件 (Button)

**用法示例：**

```tsx
{
  type: Ctrl.Button,
  text: '打开弹窗',
  onClick: this.handler.openModal,
}

{
  type: Ctrl.Button,
  text: '设置数据',
  onClick: this.handler.onSetData,
}

{
  type: Ctrl.Button,
  text: 'POST请求',
  onClick: this.handler.postData,
}

{
  type: Ctrl.Button,
  text: 'GET请求',
  onClick: this.handler.getData,
}
```

## 3. 布局组件

### 3.1 标签页布局 (Tab)

**用法示例：**

```tsx
tab: VProps.Tab = {
  type: VType.LayoutTab,
  id: 'tab',
  items: [
    {
      key: 'table1',
      label: '表格',
      viewId: this.table1.id,
    },
    {
      key: 'form1',
      label: '表单',
      viewId: this.form1.id,
    },
  ],
};
```

### 3.2 弹性布局 (Flex)

**用法示例：**

```tsx
layout: VProps.Flex = {
  id: 'layout',
  type: VType.LayoutFlex,
  items: [this.form1.id, this.tab.id],
};
```

### 3.3 弹窗布局 (Modal)

**用法示例：**

```tsx
modal: VProps.Modal = {
  id: 'modal',
  type: VType.LayoutModal,
  viewId: this.form1.id,
};
```

## 4. 复合组件

### 4.1 表单联合表格页面

**用法示例：**

```tsx
const TablePage = () => {
  return (
    <div>
      <h1>表单联合表格页面</h1>
    </div>
  );
};

export default TablePage;
```

## 5. 视图配置 (View)

**完整视图配置示例：**

```tsx
import { Ctrl, VType, ViewBase, type VProps } from '@jl/framework';
import Handler from './handler';

const options = [
  { label: '1', value: 'V1' },
  { label: '2', value: 'V2' },
  { label: '3', value: 'V3' },
];

class View extends ViewBase<Handler> {
  form1: VProps.Form = {
    id: 'form1',
    type: VType.Form,
    path: ['form'],
    items: [
      { title: '测试text', field: 'id' },
      { title: '测试text', field: 'id', ctrl: { type: Ctrl.Text } },
      { title: '测试input', field: 'name' },
      { title: '测试input', field: 'name', ctrl: { type: Ctrl.Input } },
      // 更多表单字段...
    ],
    toolList: [
      {
        type: Ctrl.Button,
        text: '打开弹窗',
        onClick: this.handler.openModal,
      },
      // 更多按钮...
    ],
  };

  table1: VProps.Table = {
    id: 'table1',
    type: VType.Table,
    rowKey: 'id',
    path: ['table'],
    items: [
      { title: '产品ID', field: 'id' },
      { title: '产品名称', field: 'name' },
      // 更多表格列...
    ],
  };

  tab: VProps.Tab = {
    type: VType.LayoutTab,
    id: 'tab',
    items: [
      {
        key: 'table1',
        label: '表格',
        viewId: this.table1.id,
      },
      {
        key: 'form1',
        label: '表单',
        viewId: this.form1.id,
      },
    ],
  };

  layout: VProps.Flex = {
    id: 'layout',
    type: VType.LayoutFlex,
    items: [this.form1.id, this.tab.id],
  };

  modal: VProps.Modal = {
    id: 'modal',
    type: VType.LayoutModal,
    viewId: this.form1.id,
  };

  getRootId = () => this.layout.id;
}

export default View;
```

## 6. 框架核心组件

### 6.1 ViewRoot

**用法示例：**

```tsx
import { ViewRoot } from '@jl/framework';
import Data from './data';
import Handler from './handler';
import VType from './view';
const DemoTablePage = () => {
  return <ViewRoot ViewClass={VType} DataClass={Data} HandlerClass={Handler} />;
};
```

## 7. 组件分类总结

| 组件类型 | 包含组件 |
|---------|---------|
| 基础组件 | Form, Table |
| 控件组件 | Text, Input, Select, Switch, Radio, Checkbox, Date, DateRange, Time, TimeRange, Link, Upload, Button |
| 布局组件 | Tab, Flex, Modal |
| 复合组件 | 表单联合表格页面 |
| 框架核心组件 | ViewRoot |
